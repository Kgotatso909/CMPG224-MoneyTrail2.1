<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation bar with dropdown</title>
    <style type="text/css">
      body {
      margin: 0;
      }
      
      nav {
      position: fixed;
      top: 0;
      width: 100%;
      height: 48.5px;
      font-family: Calibri, Arial, serif;
      background-color: #474A46;
      }
      
      .gradient_shadow {
      position: absolute;
      top: 56.5px;
      width: 100%;
      height: 6px;
      background-size: 100% 6px;
      background-repeat: no-repeat;
      }
      
      .first_dropmenu, .sec_dropmenu {
      float: left;
      height: 48.5px;
      overflow: hidden;
      transition: height 0.8s ease-out;
      }
      
      .first_dropmenu {
      width: 130px;
      }
      
      .sec_dropmenu {
      transition: height 0.3s ease-in;
      }
      
      .li_item {
      width: 0;
      transition: width 0.7s ease-in;
      transition-delay: 0.4s;
      }
      
      .first_dropmenu:hover, .sec_dropmenu:hover {
      height: 240px;
      }
      
      .sec_dropmenu:hover .li_item {
      width: 180px;
      }
      
      .first_dropmenu a, .sec_dropmenu a {
      text-decoration: none;
      color: white;
      display: block;
      height: 48.5px;
      line-height: 48.5px;
      text-align: center;
      padding: 0 15px;
      background-color: #474A46;
      background-position: 50% 0;
      font-size: 0.95em;
      }
      
      .first_dropmenu a:hover, .sec_dropmenu a:hover {
      transition: background 0.4s linear, color 0.5s linear, font-weight 0.3s ease-in;
      background: radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%),
      radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%), #3BD1AB;
      background: -webkit-radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%),
      -webkit-radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%), #3BD1AB;
      background: -webkit-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%),
      -webkit-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%), #3BD1AB;
      background: -moz-radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%),
      -moz-radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%), #3BD1AB;
      background: -o-radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%),
      -o-radial-gradient(50% 0, rgba(0, 0, 0, .5), transparent 70%), #3BD1AB;
      background-size: 55% 6px, 100% 6px, cover;
      background-position: 50% 75%, 0 0, 0 0;
      background-repeat: no-repeat;
      color: #474A46;
      font-weight: bold;
      }
      
      .container {
      margin-top: 30px;
      padding: 20px;
      }
      
      .section {
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      display: flex;
      flex-direction: column;
      padding: 25px;
      text-align: center;
      margin-top:20px;
      overflow: auto;
      }
      h1 {
  letter-spacing: 1px;
  margin: 0;
}
      h4 {
  margin: 0;
  text-transform: uppercase;
}

.inc-exp-container {
  background-color: #fff;
  border-radius: 10px;
  box-shadow: var(--box-shadow);
  padding: 20px;
  display: flex;
  justify-content: space-between;
  margin: 20px 0;
}

.inc-exp-container > div {
  flex: 1;
  text-align: center;
}

.inc-exp-container > div:first-of-type {
  border-right: 1px solid #dedede;
}
.money {
  font-size: 20px;
  letter-spacing: 1px;
  margin: 5px 0;
}

.money.plus {
  color: #2ecc71;
}

.money.minus {
  color: #c0392b;
}

      .rectangle-box {
      display: inline-block;
      background-color: #f0f0f0;
      border: 2px solid blue;
      color: blue;
      font-weight: bold;
      padding: 20px;
      cursor: pointer;
      border-radius: 12px;
      }
      
      .account-box, .budget-box, .expense-box {
      display: none;
      padding: 20px;
      box-shadow: 2px 2px 2px #ccc;
      }
      
      label {
      }
      
      input[type=text], input[type=color], input[type=number], input[type=date], #note, select {
      margin-bottom: 25px;
      display: block;
      height: 40px;
      border: none;
      border-bottom: 2px solid black;
      width: 100%;
      }
      
      button {
      width: 100%;
      height: 40px;
      border-radius: 10px;
      background: green;
      font-size: 20px;
      font-weight: bold;
      font-family: Courier new, monospace;
      color: white;
      }
      
      button:hover {
      background-color: #0056b3;
      }
      
      .account-element {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      }
      
      .account-element:hover {
      background-color: #f0f0f0;
      }
      #accounts, #budgets {
      margin-top:20px;
      font-size:24px;
      font-weight: bold;
      font-family: Courier;
      }
      
      /* Table style */
      table {
      width: 100%;
      max-height: 400px;
      } 
      
      thead {
      background: #042159;
      color: #fff;
      }
      
      th, td {
      text-align: left;
      padding: 5px;
      }
      a {
      text-decoration: underline;
      cursor: pointer;
      }
     /* .content {
          width: 80%;
          margin: 0 auto;
          background: #0869A6;
          padding: 3%;
      }*/
      
      .secondTitle {
          text-align: left;
          margin: 2% 0;
          font-weight: 100;
      }
      
      .form {
          padding: 5px;
      }
      
      .formLine {
          display: flex;
          align-items: center;
          margin: 5px 0;
      }
    </style>
</head>
<body>
<nav>
    <div class="gradient_shadow"></div>
    <div class="first_dropmenu">
        <a href="#">MENU</a>
        <a href="#">HOME</a>
        <a href="#">PROFILE</a>
        <a href="#">LOG OUT</a>
    </div>
    <div class="sec_dropmenu">
        <a href="#">ACCOUNTS</a>
        <a href="#" class="li_item">RECORDS</a>
        <a href="#" class="li_item">BUDGET</a>
        <a href="#" class="li_item">STATISTICS</a>
    </div>
</nav>
<div class="container">
    <section id="total" class="section">
           <h4>Your Balance</h4>
    <h1 id="balance">R0.00</h1>

    <div class="inc-exp-container">
        <div>
            <h4>Income</h4>
            <p id="money-plus" class="money plus">+R0.00</p>
        </div>
        <div>
            <h4>Expense</h4>
            <p id="money-minus" class="money minus">-R0.00</p>
        </div>
    </div>
    </section>
    
    <section id="expense" class="section">
        <h3>List of all accounts</h3>
        <div class="rectangle-box" onclick="toggleFormVisibility()">
            <p>ADD ACCOUNT</p>
        </div>
        <div class="account-box">
            <h3>ADD NEW ACCOUNT</h3>
            <form id="expenseForm">
                <label for="account-name">Account name</label>
                <input type="text" id="account-name">
                <label for="bank-number">Bank account number</label>
                <input type="text" id="bank-number">
                <label for="paymentType">Type:</label>
                <select id="paymentType">
                    <option value="Cash">Cash</option>
                    <option value="saving account">Saving account</option>
                    <option value="Debit Card">Debit Card</option>
                    <option value="Credit Card">Credit Card</option>
                    <option value="Web Payment">Web Payment</option>
                    <option value="Voucher">Voucher</option>
                </select>
                <label for="budgetAmount">Initial Amount:</label>
                <input type="number" id="budgetAmount"> <!-- Changed id to "budgetAmount" -->
                <label for="color">Color:</label>
                <input type="color" id="color">
                <button type="button" onclick="submitAccount()">Submit</button>
            </form>
        </div>
        <div id="accounts"></div>
    </section>
    <section id="budget" class="section"> 
        <h3>Budget Setting</h3> 
        <div class="rectangle-box" onclick="toggleBudgetFormVisibility()">
            <p>ADD BUDGET</p>
        </div>
        <div class="budget-box">
            <h3>ADD NEW BUDGET</h3>
            <form id="budgetForm">
                <label for="budget-name">Budget Name</label>
                <input type="text" id="budget-name">
                <label for="duration">Duration:</label>
                <select id="duration">
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                    <option value="yearly">Yearly</option>
                </select>
                <label for="budgetAmount">Amount:</label>
                <input type="number" id="budgetAmount"> <!-- Changed id to "budgetAmount" -->
                <label for="note">Note:</label>
                <textarea id="note"></textarea>
                <button type="button" onclick="submitBudget()">Submit</button>
            </form>
        </div>
        <div id="budgets" style="background-color:blue;"></div>
     </section>
     
     <section id="expense" class="section">
        <h3>Expense logging</h3>
         <section class="rectangle-box" onclick="toggleExpenseFormVisibility()">
          <p>ADD EXPENSE</p>
         </section>
         <section style="display: none" class="expense-box">
         <h3 class="secondTitle" >Add a new item:</h3>
         <div class="form">
         <form id="expForm">
         <div class="formLine">
         <label for="type">Type:</label>
         <select id="type">
         <option value="chooseOne">Choose One</option>
         <option value="card">Card</option>
         <option value="cash">Cash</option>
         <option value="web payment">Web Payment</option>
         <option value="other">Other</option>
         </select>
         </div>
         <div class="formLine">
         <label for="name">Name:</label>
         <input type="text" id="name">
         </div>
         <div class="formLine">
         <label for="date">Date:</label>
         <input type="date" id="date">
         </div>
         <div class="formLine">
         <label for="amount">Amount:</label>
         <input type="text" id="amount">
         </div>
         <div class="formLine">
         <label for="category">Category:</label>
         <select id="category">
         <option value="chooseOne">Choose One</option>
         <option value="education">Education</option>
         <option value="Life & Entertainment">Life & Entertainment</option>
         <option value="Food">Food</option>
         <option value="household">Household</option>
         <option value="transport">Transport</option>
         <option value="financial expenses">Financial Expenses</option>
         <option value="communication">Communication</option>
         <option value="other">Other</option>
         </select>
         </div>
         <button type="submit" class="buttonSave">Add a new expense</button>
         </form>
         </div>
         </section>
     </section>
     
     <section id="display-table" class="section" >
         <h3>Table of Expenses</h3>
         <section class="content">
         <table class="table">
         <thead>
         <tr>
         <th>Type</th>
         <th>Category</th>
         <th>Name</th>
         <th>Date</th>
         <th>Amount</th>
         <th>Options</th>
         </tr>
         </thead>
         <tbody id="expenseTable">
         
         </tbody>
         </table>
         </section>
     </section>
    <button id="download-pdf-button">Download Expense Table as PDF</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>


<script>
// Function to toggle visibility of the expense form
function toggleExpenseFormVisibility() {
    const expenseForm = document.querySelector(".expense-box");
    expenseForm.style.display = expenseForm.style.display === "none" ? "block" : "none";
}

document.getElementById("expForm").addEventListener("submit", addExpense);
const expenses = JSON.parse(localStorage.getItem('expenses')) || [];

function addExpense(e) {
    e.preventDefault();
    let type = document.getElementById("type").value;
    let name = document.getElementById("name").value;
    let date = document.getElementById("date").value;
    let category = document.getElementById("category").value;
    let amount = document.getElementById("amount").value;
    if (type !== 'chooseOne' && category !== 'chooseOne' && name.length > 0 && date.length > 0 && amount > 0) {
        const expense = {
            type,
            category,
            name,
            date,
            amount,
            id: expenses.length > 0 ? expenses[expenses.length - 1].id + 1 : 1,
        };
        expenses.push(expense);
        localStorage.setItem('expenses', JSON.stringify(expenses));
    }
    document.getElementById("expForm").reset();
    showExpense();
    calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
}

const showExpense = () => {
    const expenseTable = document.getElementById("expenseTable");
    expenseTable.innerHTML = '';
    for (let i = 0; i < expenses.length; i++) {
        expenseTable.innerHTML += `<tr>
            <td>${expenses[i].type}</td>
            <td>${expenses[i].category}</td>
            <td>${expenses[i].name}</td>
            <td>${expenses[i].date}</td>
            <td>${expenses[i].amount}</td>
            <td><a class="deleteButton" onclick="deleteExpense(${expenses[i].id})">Delete</a></td>
        </tr>`;
    }
};

const deleteExpense = (id) => {
    for (let i = 0; i < expenses.length; i++) {
        if (expenses[i].id === id) {
            expenses.splice(i, 1);
        }
    }
    localStorage.setItem('expenses', JSON.stringify(expenses));
    showExpense();
    calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
};

showExpense();

// Function to toggle visibility of the account form
function toggleFormVisibility() {
    const accountForm = document.querySelector(".account-box");
    accountForm.style.display = accountForm.style.display === "none" ? "block" : "none";
}

function submitAccount() {
    const accountName = document.getElementById("account-name").value;
    const bankNumber = document.getElementById("bank-number").value;
    const initialAmount = document.getElementById("budgetAmount").value;
    const color = document.getElementById("color").value;

    const accountElement = document.createElement("div");
    accountElement.classList.add("account-element");
    accountElement.style.backgroundColor = color;
    accountElement.innerHTML = `
        <p>${accountName}</p>
        <p>${bankNumber}</p>
        <p>R${initialAmount}</p>
    `;
    accountElement.onclick = function () {
        const action = prompt("Choose an action: '1. edit' or '2. delete'");
        if (action === "1") {
            editAccount(accountElement);
        } else if (action === "2") {
            deleteAccount(accountElement);
        } else {
            alert("Invalid action");
        }
    };

    const accounts = document.getElementById("accounts");
    accounts.appendChild(accountElement);

    saveAccounts();

    document.getElementById("account-name").value = "";
    document.getElementById("bank-number").value = "";
    document.getElementById("budgetAmount").value = "";

    calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
}

function editAccount(accountElement) {
    const accountName = prompt("Enter new account name");
    const bankNumber = prompt("Enter new bank account number");
    const initialAmount = prompt("Enter new initial amount");

    accountElement.innerHTML = `
        <p>${accountName}</p>
        <p>${bankNumber}</p>
        <p>R${initialAmount}</p>
    `;

    saveAccounts();

    calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
}

function deleteAccount(accountElement) {
    const confirmDelete = confirm("Are you sure you want to delete this account?");
    if (confirmDelete) {
        accountElement.remove();
        saveAccounts();
        calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
    }
}

function saveAccounts() {
    const accountsElement = document.getElementById("accounts");
    const accountsData = accountsElement.innerHTML;
    localStorage.setItem('accountsData', accountsData);
}

function loadAccounts() {
    const accountsData = localStorage.getItem('accountsData');
    if (accountsData) {
        const accountsElement = document.getElementById("accounts");
        accountsElement.innerHTML = accountsData;

        const accountElements = accountsElement.querySelectorAll(".account-element");
        accountElements.forEach(accountElement => {
            accountElement.onclick = function () {
                const action = prompt("Choose an action: '1. edit' or '2. delete'");
                if (action === "1") {
                    editAccount(accountElement);
                } else if (action === "2") {
                    deleteAccount(accountElement);
                } else {
                    alert("Invalid action");
                }
            };
        });
    }
}

loadAccounts();

function toggleBudgetFormVisibility() {
    const budgetForm = document.querySelector(".budget-box");
    budgetForm.style.display = budgetForm.style.display === "none" ? "block" : "none";
}

function submitBudget() {
    const budgetName = document.getElementById("budget-name").value;
    const duration = document.getElementById("duration").value;
    const budgetAmount = document.getElementById("budgetAmount").value;
    const note = document.getElementById("note").value;

    const budgetElement = document.createElement("div");
    budgetElement.classList.add("budget-element");
    budgetElement.innerHTML = `
        <p><strong>Budget Name:</strong> ${budgetName}</p>
        <p><strong>Duration:</strong> ${duration}</p>
        <p><strong>Amount:</strong> R${budgetAmount}</p>
        <p><strong>Note:</strong> ${note}</p>
    `;
    budgetElement.onclick = function () {
        const action = prompt("Choose an action: '1. edit' or '2. delete'");
        if (action === "1") {
            editBudget(budgetElement);
        } else if (action === "2") {
            deleteBudget(budgetElement);
        } else {
            alert("Invalid action");
        }
    };

    const budgets = document.getElementById("budgets");
    budgets.appendChild(budgetElement);

    saveBudgets();

    document.getElementById("budget-name").value = "";
    document.getElementById("duration").value = "daily";
    document.getElementById("budgetAmount").value = "";
    document.getElementById("note").value = "";

    calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
}

function editBudget(budgetElement) {
    const budgetName = prompt("Enter new budget name");
    const duration = prompt("Enter new duration");
    const budgetAmount = prompt("Enter new amount");
    const note = prompt("Enter new note");

    budgetElement.innerHTML = `
        <p><strong>Budget Name:</strong> ${budgetName}</p>
        <p><strong>Duration:</strong> ${duration}</p>
        <p><strong>Amount:</strong> R${budgetAmount}</p>
        <p><strong>Note:</strong> ${note}</p>
    `;

    saveBudgets();

    calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
}

function deleteBudget(budgetElement) {
    const confirmDelete = confirm("Are you sure you want to delete this budget?");
    if (confirmDelete) {
        budgetElement.remove();
        saveBudgets();
        calculateMoneyAndBalance(); // Add this line to update money-plus, money-minus, and balance
    }
}

function saveBudgets() {
    const budgetsElement = document.getElementById("budgets");
    const budgetsData = budgetsElement.innerHTML;
    localStorage.setItem('budgetsData', budgetsData);
}

function loadBudgets() {
    const budgetsData = localStorage.getItem('budgetsData');
    if (budgetsData) {
        const budgetsElement = document.getElementById("budgets");
        budgetsElement.innerHTML = budgetsData;

        const budgetElements = budgetsElement.querySelectorAll(".budget-element");
        budgetElements.forEach(budgetElement => {
            budgetElement.onclick = function () {
                const action = prompt("Choose an action: '1. edit' or '2. delete'");
                if (action === "1") {
                    editBudget(budgetElement);
                } else if (action === "2") {
                    deleteBudget(budgetElement);
                } else {
                    alert("Invalid action");
                }
            };
        });
    }
}

loadBudgets();

// Function to calculate money-plus, money-minus, and balance
function calculateMoneyAndBalance() {
    // Calculate the total initial amount from accounts
    const accountElements = document.querySelectorAll(".account-element");
    let totalInitialAmount = 0;
    for (let i = 0; i < accountElements.length; i++) {
        const initialAmountText = accountElements[i].querySelector("p:nth-child(3)").textContent;
        const initialAmount = parseFloat(initialAmountText.substring(1)); // Remove the 'R' symbol and convert to a number
        totalInitialAmount += initialAmount;
    }

    // Calculate the total expenses
    let totalExpenses = 0;
    for (let i = 0; i < expenses.length; i++) {
        totalExpenses += parseFloat(expenses[i].amount);
    }

    // Calculate money-plus and money-minus
    const moneyPlus = totalInitialAmount.toFixed(2);
    const moneyMinus = totalExpenses.toFixed(2);

    // Calculate balance
    const balance = (totalInitialAmount - totalExpenses).toFixed(2);

    // Update the values in the HTML
    document.getElementById("money-plus").textContent = `+R${moneyPlus}`;
    document.getElementById("money-minus").textContent = `-R${moneyMinus}`;
    document.getElementById("balance").textContent = `R${balance}`;
}

// Add this code inside your <script> tag after the other JavaScript functions

// Function to generate and download the PDF
function downloadExpenseTableAsPDF() {
    // Create a new jsPDF instance
    const doc = new jsPDF();

    // Define the columns and rows of the expense table
    const columns = ["Type", "Category", "Name", "Date", "Amount"];
    const data = expenses.map(expense => [expense.type, expense.category, expense.name, expense.date, expense.amount]);

    // Set the position and dimensions for the table
    const startX = 10;
    const startY = 10;
    const tableWidth = 190;
    const tableHeight = 20;
    
    // Create the table using autoTable plugin of jsPDF
    doc.autoTable({
        head: [columns],
        body: data,
        startX: startX,
        startY: startY,
        theme: 'grid',
        styles: { fontSize: 10 },
        tableWidth: tableWidth,
        tableHeight: tableHeight,
        columnStyles: { 0: { cellWidth: 30 }, 1: { cellWidth: 30 }, 2: { cellWidth: 50 }, 3: { cellWidth: 30 }, 4: { cellWidth: 20 } }
    });

    // Save the PDF with a specific name (e.g., 'expense_table.pdf')
    doc.save('expense_table.pdf');
}

// Add a click event listener to the button
const downloadButton = document.getElementById('download-pdf-button');
downloadButton.addEventListener('click', downloadExpenseTableAsPDF);


</script>
</body>
</html>